= Documentation v0.3 â€“ IntÃ©gration des Notifications & AmÃ©liorations UX/UI
v0.3, Janvier 2025
:pdf-theme: default
:pdf-fontsdir: GEMS_DIR/asciidoctor-pdf/data/fonts
:pdf-page-size: A4
:pdf-page-layout: portrait
:pdf-scripts: scripts
:toc:
:toc-title: Sommaire

== ğŸ¯ Introduction

La version v0.3 marque une avancÃ©e majeure pour lâ€™application en intÃ©grant un **systÃ¨me de notifications en temps rÃ©el**, une **gestion fluide des demandes dâ€™intÃ©rÃªt**, et une **expÃ©rience utilisateur optimisÃ©e**.

Cette documentation couvre :

. Les nouvelles fonctionnalitÃ©s dÃ©veloppÃ©es.
. Les **flux utilisateurs** pour chaque action clÃ©.
. Les **endpoints backend** utilisÃ©s.
. Lâ€™**impact mÃ©tier** et la valeur ajoutÃ©e des amÃ©liorations.
. Un **diagramme de sÃ©quence UML** pour illustrer le workflow.

---

== ğŸš€ FonctionnalitÃ©s AjoutÃ©es

=== ğŸ“Œ 2.1 SystÃ¨me de Notifications en Temps RÃ©el ğŸ””

**Description**

Le systÃ¨me de notifications permet aux utilisateurs de **recevoir des alertes instantanÃ©es** lorsquâ€™ils effectuent des actions importantes (**demande dâ€™intÃ©rÃªt envoyÃ©e, acceptation/refus dâ€™une demande**).

**Flux Utilisateur**

. Un utilisateur effectue une action (*ex : envoie une demande dâ€™intÃ©rÃªt*).
. Une notification est **gÃ©nÃ©rÃ©e en base de donnÃ©es** et **envoyÃ©e en temps rÃ©el via WebSockets**.
. Lâ€™**icÃ´ne ğŸ”” dans la navbar affiche un badge** avec le nombre de notifications non lues.
. Lâ€™utilisateur peut ouvrir **le panneau de notifications** et voir les nouvelles alertes.
. Les notifications peuvent Ãªtre **supprimÃ©es individuellement** ou **toutes en mÃªme temps**.

**Endpoints Backend**
|===
| MÃ©thode | Endpoint | Description
| **GET** | `/notifications/:userId` | RÃ©cupÃ¨re toutes les notifications dâ€™un utilisateur.
| **POST** | `/notifications` | CrÃ©e une nouvelle notification.
| **DELETE** | `/notifications/:notifId` | Supprime une notification spÃ©cifique.
| **DELETE** | `/notifications/all/:userId` | Supprime toutes les notifications dâ€™un utilisateur.
|===

---

=== ğŸ“Œ 2.2 Workflow des Demandes dâ€™IntÃ©rÃªt ğŸ“©

**Description**

Les utilisateurs peuvent maintenant :

* **Envoyer une demande dâ€™intÃ©rÃªt** pour une annonce.
* **Recevoir une notification immÃ©diate** lorsquâ€™une demande est reÃ§ue.
* **Accepter ou refuser une demande** via lâ€™interface.
* **Notifier lâ€™utilisateur intÃ©ressÃ©** du statut de sa demande **en temps rÃ©el**.

**Flux Utilisateur**

. **Lâ€™utilisateur intÃ©ressÃ© clique sur "Demander"**.
. La demande est enregistrÃ©e en base (**POST /interests**).
. Le proposeur reÃ§oit une **notification** dans son espace â€œMes IntÃ©rÃªts ReÃ§usâ€.
. **Il peut accepter ou refuser la demande**.
. Lâ€™utilisateur intÃ©ressÃ© est **notifiÃ© immÃ©diatement** du rÃ©sultat.
. **Si acceptÃ©, les coordonnÃ©es du proposeur sont affichÃ©es**.

**Endpoints Backend**
|===
| MÃ©thode | Endpoint | Description
| **POST** | `/interests` | CrÃ©er une demande dâ€™intÃ©rÃªt.
| **GET** | `/interests/received/:userId` | RÃ©cupÃ©rer les demandes reÃ§ues.
| **GET** | `/interests/sent/:userId` | RÃ©cupÃ©rer les demandes envoyÃ©es.
| **PUT** | `/interests/:id` | Accepter ou refuser une demande.
|===

---

=== ğŸ“Œ 2.3 Page â€œMes Demandes EnvoyÃ©esâ€ ğŸ“¤

**Description**

Ajout dâ€™une nouvelle section permettant aux utilisateurs de **suivre leurs demandes** et voir si elles sont **acceptÃ©es ou refusÃ©es**.

**Flux Utilisateur**

. Lâ€™utilisateur consulte **la section â€œMes demandes envoyÃ©esâ€**.
. Il voit **toutes ses demandes** avec leur statut actuel.
. **Si la demande est acceptÃ©e**, il accÃ¨de aux **coordonnÃ©es du proposeur**.

**Endpoints Backend**
|===
| MÃ©thode | Endpoint | Description
| **GET** | `/interests/sent/:userId` | Retourne les demandes envoyÃ©es par lâ€™utilisateur.
| **PUT** | `/interests/:id` | Met Ã  jour le statut dâ€™une demande.
|===

---

=== ğŸ“Œ 2.4 AmÃ©liorations UX/UI ğŸ¨

Lâ€™application a Ã©tÃ© **remaniÃ©e graphiquement** pour une **meilleure expÃ©rience utilisateur** :

* âœ… **Nouvelle navbar fixe** avec **navigation fluide**.
* âœ… **Popup de notifications stylÃ©e** avec **mise en forme propre**.
* âœ… **Suppression du bleu flashy** et **adoption dâ€™un design plus Ã©purÃ©**.
* âœ… **Animations CSS** pour un rendu **plus dynamique**.
* âœ… **Espacement et marges ajustÃ©s** pour **une meilleure lisibilitÃ©**.

---

== ğŸ“Š Impact MÃ©tier & Valeur AjoutÃ©e

|===
| FonctionnalitÃ© | Valeur AjoutÃ©e
| ğŸ”” Notifications en temps rÃ©el | Permet aux utilisateurs dâ€™Ãªtre informÃ©s instantanÃ©ment des actions importantes.
| ğŸ“© Gestion des demandes dâ€™intÃ©rÃªt | Simplifie lâ€™interaction entre utilisateurs, rendant le processus plus intuitif.
| ğŸ“¤ Suivi des demandes envoyÃ©es | Apporte de la transparence sur lâ€™Ã©tat des interactions.
| ğŸ¨ ExpÃ©rience utilisateur amÃ©liorÃ©e | Favorise lâ€™adoption de la plateforme grÃ¢ce Ã  une interface plus intuitive et agrÃ©able.
|===

---

== ğŸ¨ Diagramme de SÃ©quence UML

Voici le diagramme dÃ©taillant le workflow des demandes dâ€™intÃ©rÃªt avec notifications :

:toc:
:source-highlighter: rouge
:icons: font
:sectnums:
:imagesdir: images
:diagram-extension: svg
:diagram-dir: diagrams
[plantuml, notifications-sequence, svg]
----
@startuml
participant "Utilisateur IntÃ©ressÃ© (par l'annonce)" as UI
participant "Frontend (React)" as FE
participant "Backend API" as API
participant "Base de DonnÃ©es" as DB
participant "WebSockets" as WS
participant "Proposeur (de l'annonce)" as P

== ğŸ“© 1. L'utilisateur envoie une demande dâ€™intÃ©rÃªt ==
UI -> FE: Clique sur "Demander"
FE -> API: **POST** /interests (proposition_id, interested_user_id)
API -> DB: ğŸ” VÃ©rifie que la proposition existe
DB --> API: âœ… OK
API -> DB: ğŸ“ Enregistre la demande avec statut **"pending"**
DB --> API: âœ… OK (id_interet)
API -> WS: ğŸ“¡ **Ã‰met une notification au proposeur**
WS --> P: ğŸ”” "Nouvelle demande reÃ§ue"

== ğŸ“¥ 2. Le proposeur consulte ses demandes ==
P -> FE: AccÃ¨de Ã  "Mes IntÃ©rÃªts ReÃ§us"
FE -> API: **GET** /interests/received/:userId
API -> DB: ğŸ” RÃ©cupÃ¨re toutes les demandes associÃ©es Ã  lâ€™utilisateur
DB --> API: ğŸ“‹ Renvoie les demandes (id, titre, utilisateur intÃ©ressÃ©)
API --> FE: ğŸ–¥ï¸ Affiche la liste des demandes

== âœ… 3A. Le proposeur **accepte** la demande ==
P -> FE: Clique sur "**Accepter**"
FE -> API: **PUT** /interests/:id (status: accepted)
API -> DB: âœ… Met Ã  jour le statut en **"accepted"**
DB --> API: âœ… OK
API -> WS: ğŸ“¡ **Ã‰met une notification avec le statut acceptÃ©**
WS --> UI: ğŸ”” "**ğŸ‰ Votre demande a Ã©tÃ© acceptÃ©e ! Voici les contacts ğŸ“§ğŸ“**"

== âŒ 3B. Le proposeur **refuse** la demande ==
P -> FE: Clique sur "**Refuser**"
FE -> API: **PUT** /interests/:id (status: rejected)
API -> DB: âŒ Met Ã  jour le statut en **"rejected"**
DB --> API: âœ… OK
API -> WS: ğŸ“¡ **Ã‰met une notification avec le statut refusÃ©**
WS --> UI: ğŸ”” "**âŒ Votre demande a Ã©tÃ© refusÃ©e.**"
@enduml
----

== âœ… Tests & Validation

* **Notifications en temps rÃ©el** : Fonctionnent sans latence.
* **Gestion des statuts (pending, accepted, rejected)** : Bien mise Ã  jour en base.
* **UI et UX fluides** : Interface rÃ©active et intuitive.